{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CowDetailComponent = class CowDetailComponent {\n  constructor(route, cows) {\n    this.route = route;\n    this.cows = cows;\n    this.vache = null;\n    this.loading = true;\n    this.saving = false;\n  }\n  ngOnInit() {\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    this.cows.get(id).subscribe(v => {\n      this.vache = v;\n      this.loading = false;\n    });\n  }\n  save() {\n    if (!this.vache) return;\n    this.saving = true;\n    let payload;\n    if (this.file) {\n      const fd = new FormData();\n      ['date_dernier_village', 'date_prochain_village', 'date_insimination', 'date_taghriz'].forEach(k => this.vache[k] && fd.append(k, this.vache[k]));\n      fd.append('historique_medical', this.file);\n      payload = fd;\n    } else {\n      payload = {\n        date_dernier_village: this.vache.date_dernier_village || null,\n        date_prochain_village: this.vache.date_prochain_village || null,\n        date_insimination: this.vache.date_insimination || null,\n        date_taghriz: this.vache.date_taghriz || null\n      };\n    }\n    this.cows.update(this.vache.id, payload).subscribe({\n      next: vv => {\n        this.vache = vv;\n        this.saving = false;\n        this.file = undefined;\n      },\n      error: () => this.saving = false\n    });\n  }\n};\nCowDetailComponent = __decorate([Component({\n  selector: 'app-cow-detail',\n  templateUrl: './cow-detail.component.html',\n  styleUrls: ['./cow-detail.component.css']\n})], CowDetailComponent);\nexport { CowDetailComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}