{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/milk.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction MilkFormComponent_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Ajouter\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MilkFormComponent_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Enregistrement...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MilkFormComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nexport let MilkFormComponent = /*#__PURE__*/(() => {\n  class MilkFormComponent {\n    constructor(milk) {\n      this.milk = milk;\n      this.today = new Date().toISOString().split('T')[0];\n      this.model = {\n        date: '',\n        quantite_lait_matin: 0,\n        quantite_lait_soir: 0,\n        remarque: ''\n      };\n      this.saving = false;\n    }\n    ngOnInit() {\n      if (!this.model.date) {\n        this.model.date = this.today;\n      }\n    }\n    submit() {\n      this.saving = true;\n      this.error = undefined;\n      const p = {\n        date: this.model.date,\n        quantite_lait_matin: Number(this.model.quantite_lait_matin || 0),\n        quantite_lait_soir: Number(this.model.quantite_lait_soir || 0),\n        remarque: this.model.remarque || null\n      };\n      this.milk.create(this.vacheId, p).subscribe({\n        next: () => {\n          this.saving = false;\n          this.model = {\n            date: '',\n            quantite_lait_matin: 0,\n            quantite_lait_soir: 0,\n            remarque: ''\n          };\n        },\n        error: e => {\n          this.error = e?.error?.msg || 'Erreur';\n          this.saving = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function MilkFormComponent_Factory(t) {\n        return new (t || MilkFormComponent)(i0.ɵɵdirectiveInject(i1.MilkService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MilkFormComponent,\n        selectors: [[\"app-milk-form\"]],\n        inputs: {\n          vacheId: \"vacheId\"\n        },\n        decls: 26,\n        vars: 9,\n        consts: [[1, \"milk-form-wrapper\"], [1, \"milk-title\"], [1, \"card\", \"milk-card\"], [1, \"row\", \"g-3\"], [1, \"col-12\"], [1, \"form-label\"], [\"type\", \"date\", \"readonly\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"value\"], [1, \"col-6\"], [\"type\", \"number\", \"step\", \"0.1\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"placeholder\", \"Optionnel\", \"rows\", \"3\", 1, \"form-remarque\", 3, \"ngModelChange\", \"ngModel\"], [1, \"action-bar\"], [1, \"btn\", \"btn-primary\", \"w-100\", 3, \"click\", \"disabled\"], [4, \"ngIf\"], [\"class\", \"alert alert-danger mt-2\", 4, \"ngIf\"], [1, \"alert\", \"alert-danger\", \"mt-2\"]],\n        template: function MilkFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n            i0.ɵɵtext(2, \"\\uD83E\\uDD5B Ajouter une production\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\n            i0.ɵɵtext(7, \"Date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"input\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MilkFormComponent_Template_input_ngModelChange_8_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.model.date, $event) || (ctx.model.date = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 7)(10, \"label\", 5);\n            i0.ɵɵtext(11, \"Prodution matin en litre\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"input\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MilkFormComponent_Template_input_ngModelChange_12_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.model.quantite_lait_matin, $event) || (ctx.model.quantite_lait_matin = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 7)(14, \"label\", 5);\n            i0.ɵɵtext(15, \" Prodution soire en litre \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"input\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MilkFormComponent_Template_input_ngModelChange_16_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.model.quantite_lait_soir, $event) || (ctx.model.quantite_lait_soir = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(17, \"div\", 4)(18, \"label\", 5);\n            i0.ɵɵtext(19, \"Remarque\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"textarea\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MilkFormComponent_Template_textarea_ngModelChange_20_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.model.remarque, $event) || (ctx.model.remarque = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"div\", 10)(22, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function MilkFormComponent_Template_button_click_22_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵtemplate(23, MilkFormComponent_span_23_Template, 2, 0, \"span\", 12)(24, MilkFormComponent_span_24_Template, 2, 0, \"span\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(25, MilkFormComponent_div_25_Template, 2, 1, \"div\", 13);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.model.date);\n            i0.ɵɵproperty(\"value\", ctx.today);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.model.quantite_lait_matin);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.model.quantite_lait_soir);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.model.remarque);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.saving);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.saving);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.saving);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n          }\n        },\n        dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.MinValidator, i3.NgModel],\n        styles: [\".milk-form-wrapper[_ngcontent-%COMP%]{padding:16px;background:#f3f8f3;min-height:calc(100vh - 70px)}.milk-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#2d572c;margin-bottom:1rem;text-align:center}.milk-card[_ngcontent-%COMP%]{border-radius:14px;padding:20px;box-shadow:0 6px 16px #0000001f;background:#fff;animation:_ngcontent-%COMP%_fadeIn .4s ease}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:4px}.form-control[_ngcontent-%COMP%]{border-radius:10px;padding:10px 12px;border:1px solid #ccc;font-size:14px;width:70%;margin:20px;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#2d572c;box-shadow:0 0 0 3px #2d572c40;outline:none}.btn-primary[_ngcontent-%COMP%]{width:100%;background:#2d572c;border:none;border-radius:10px;padding:12px;font-size:15px;font-weight:600;color:#fff;transition:background .2s ease,transform .1s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#244a23;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{background:#a4c2a4;cursor:not-allowed}.form-remarque[_ngcontent-%COMP%]{width:70%;border-radius:10px;padding:10px 12px;font-size:14px;border:1px solid #ccc;resize:vertical;transition:all .2s ease;font-family:inherit}.form-remarque[_ngcontent-%COMP%]:focus{border-color:#2d572c;box-shadow:0 0 0 3px #2d572c40;outline:none}.alert-danger[_ngcontent-%COMP%]{border-radius:8px;padding:8px;font-size:14px;text-align:center}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 576px){.milk-card[_ngcontent-%COMP%]{padding:16px}.milk-title[_ngcontent-%COMP%]{font-size:1.1rem}}\"]\n      });\n    }\n  }\n  return MilkFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}